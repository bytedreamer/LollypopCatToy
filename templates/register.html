<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>

    <script src="{{ url_for('static', filename='js/lib/jquery-2.1.3.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/lib/underscore-min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/lib/backbone-min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/lib/socket.io.min.js') }}"></script>
</head>
<body>
    <h3>{{ request.form['name'] }}, you have successfully registered to activate the cat play toys.</h3>

    <p>Key: {{ key }}</p>

    <p>Number of visitors in queue: <span id="VisitorQueueNumber"></span></p>
    <p>Time Left: <span id="TimeLeft"></span></p>

    <p>Ready: <span id="IsReady"></span></p>

    <script type="text/javascript">
        var socket = io.connect('http://' + document.domain + ':' + location.port + '/queue');
        socket.on('{{ key }}', function(status) {
            $('#TimeLeft').text(status.time_left);
            $('#VisitorQueueNumber').text(status.queue_length);
            $('#IsReady').text(status.is_ready);
        });
    </script>
</body>
</html>